
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>M4P - BIGTREETECH documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="_biqumkdocs/css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#m4p" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="BIGTREETECH documentation" class="md-header__button md-logo" aria-label="BIGTREETECH documentation" data-md-component="logo">
      
  <img src="img/BQ-BIQU.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BIGTREETECH documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              M4P
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/z1996xm/BIGTREETECH/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    z1996xm/BIGTREETECH
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="BIGTREETECH documentation" class="md-nav__button md-logo" aria-label="BIGTREETECH documentation" data-md-component="logo">
      
  <img src="img/BQ-BIQU.svg" alt="logo">

    </a>
    BIGTREETECH documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/z1996xm/BIGTREETECH/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    z1996xm/BIGTREETECH
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Motherboards
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Motherboards" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Motherboards
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1">
          SKR Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SKR Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          SKR Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SKR%20MINI%20E3.html" class="md-nav__link">
        SKR MINI E3
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Octopus Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Octopus Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Octopus Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Octopus.html" class="md-nav__link">
        Octopus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Octopus%20Pro.html" class="md-nav__link">
        Octopus Pro
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          Manta Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Manta Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Manta Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          M4P
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="M4P.html" class="md-nav__link md-nav__link--active">
        M4P
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-brief-introduction" class="md-nav__link">
    1. Brief Introduction
  </a>
  
    <nav class="md-nav" aria-label="1. Brief Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-main-features" class="md-nav__link">
    1.1 Main Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-parameters" class="md-nav__link">
    1.2 Basic Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-product-dimension" class="md-nav__link">
    1.3 Product Dimension
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-peripheral-interface" class="md-nav__link">
    2. Peripheral Interface
  </a>
  
    <nav class="md-nav" aria-label="2. Peripheral Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-interface-diagram" class="md-nav__link">
    2.1 Interface Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-pin-out" class="md-nav__link">
    2.2 Pin Out
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-interface-instruction" class="md-nav__link">
    3. Interface Instruction
  </a>
  
    <nav class="md-nav" aria-label="3. Interface Instruction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-installing-the-core-board" class="md-nav__link">
    3.1 Installing the Core Board
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-40-pin-gpio" class="md-nav__link">
    3.2 40 pin GPIO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-type-c" class="md-nav__link">
    3.3 TYPE-C
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-stepper-driver" class="md-nav__link">
    3.4 Stepper Driver
  </a>
  
    <nav class="md-nav" aria-label="3.4 Stepper Driver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-normal-stepdirstandalone-mode" class="md-nav__link">
    3.4.1 Normal STEP/DIR(STANDALONE) Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-uart-mode-of-tmc-driver" class="md-nav__link">
    3.4.2 UART Mode of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-spi-mode-of-tmc-driver" class="md-nav__link">
    3.4.3 SPI Mode of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#344-diagsensorless-homing-of-tmc-driver" class="md-nav__link">
    3.4.4 DIAG(Sensorless Homing) of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#345-stepper-driver-voltage-selection" class="md-nav__link">
    3.4.5 Stepper Driver Voltage Selection
  </a>
  
    <nav class="md-nav" aria-label="3.4.5 Stepper Driver Voltage Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#driver-independent-power-supply" class="md-nav__link">
    Driver independent power supply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-power-supply" class="md-nav__link">
    Main power supply
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-bltouch-wiring" class="md-nav__link">
    3.5 BLTouch Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-exp1exp2-and-lcd-screen-wiring" class="md-nav__link">
    3.6 EXP1+EXP2 and LCD Screen Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-rgb-wiring" class="md-nav__link">
    3.7 RGB Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38-dsicsi-wiring" class="md-nav__link">
    3.8 DSI/CSI Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#39-spi-display-wiring" class="md-nav__link">
    3.9 SPI Display Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#310-adxl345-accelerometer" class="md-nav__link">
    3.10 ADXL345 Accelerometer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-os-download" class="md-nav__link">
    4. OS Download
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="M5P.html" class="md-nav__link">
        M5P
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="M8P.html" class="md-nav__link">
        M8P
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          EBB Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="EBB Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          EBB Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EBB%2036%20CAN.html" class="md-nav__link">
        EBB 36 CAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EBB%2042%20CAN.html" class="md-nav__link">
        EBB 42 CAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EBB%202240%202209%20CAN.html" class="md-nav__link">
        EBB 2240/2209 CAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="U2C.html" class="md-nav__link">
        U2C
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          IOT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IOT" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          IOT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CB1.html" class="md-nav__link">
        CB1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="PI4B.html" class="md-nav__link">
        PI4B
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Displays
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Displays" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Displays
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TFT%2043-DIP.html" class="md-nav__link">
        TFT 43-DIP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TFT35%20E3.html" class="md-nav__link">
        TFT35 E3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TFT35.html" class="md-nav__link">
        TFT35
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TFT24.html" class="md-nav__link">
        TFT24
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TFT35%20SPI.html" class="md-nav__link">
        TFT35 SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="HDMI5.html" class="md-nav__link">
        HDMI5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="HDMI7.html" class="md-nav__link">
        HDMI7
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Motor Drives
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Motor Drives" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Motor Drives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          TMC Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="TMC Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          TMC Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC2130.html" class="md-nav__link">
        TMC2130
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC5160.html" class="md-nav__link">
        TMC5160
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC2209.html" class="md-nav__link">
        TMC2209
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC2208.html" class="md-nav__link">
        TMC2208
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          EZ Series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="EZ Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          EZ Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2130.html" class="md-nav__link">
        EZ2130
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2208.html" class="md-nav__link">
        EZ2208
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2225.html" class="md-nav__link">
        EZ2225
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2226.html" class="md-nav__link">
        EZ2226
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ5160%20Pro.html" class="md-nav__link">
        EZ5160 Pro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZDriver%20Connector.html" class="md-nav__link">
        EZDriver Connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2209.html" class="md-nav__link">
        EZ2209
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ2240.html" class="md-nav__link">
        EZ2240
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="EZ31865.html" class="md-nav__link">
        EZ31865
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Tutorials.html" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-brief-introduction" class="md-nav__link">
    1. Brief Introduction
  </a>
  
    <nav class="md-nav" aria-label="1. Brief Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-main-features" class="md-nav__link">
    1.1 Main Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-parameters" class="md-nav__link">
    1.2 Basic Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-product-dimension" class="md-nav__link">
    1.3 Product Dimension
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-peripheral-interface" class="md-nav__link">
    2. Peripheral Interface
  </a>
  
    <nav class="md-nav" aria-label="2. Peripheral Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-interface-diagram" class="md-nav__link">
    2.1 Interface Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-pin-out" class="md-nav__link">
    2.2 Pin Out
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-interface-instruction" class="md-nav__link">
    3. Interface Instruction
  </a>
  
    <nav class="md-nav" aria-label="3. Interface Instruction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-installing-the-core-board" class="md-nav__link">
    3.1 Installing the Core Board
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-40-pin-gpio" class="md-nav__link">
    3.2 40 pin GPIO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-type-c" class="md-nav__link">
    3.3 TYPE-C
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-stepper-driver" class="md-nav__link">
    3.4 Stepper Driver
  </a>
  
    <nav class="md-nav" aria-label="3.4 Stepper Driver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-normal-stepdirstandalone-mode" class="md-nav__link">
    3.4.1 Normal STEP/DIR(STANDALONE) Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-uart-mode-of-tmc-driver" class="md-nav__link">
    3.4.2 UART Mode of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-spi-mode-of-tmc-driver" class="md-nav__link">
    3.4.3 SPI Mode of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#344-diagsensorless-homing-of-tmc-driver" class="md-nav__link">
    3.4.4 DIAG(Sensorless Homing) of TMC Driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#345-stepper-driver-voltage-selection" class="md-nav__link">
    3.4.5 Stepper Driver Voltage Selection
  </a>
  
    <nav class="md-nav" aria-label="3.4.5 Stepper Driver Voltage Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#driver-independent-power-supply" class="md-nav__link">
    Driver independent power supply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-power-supply" class="md-nav__link">
    Main power supply
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-bltouch-wiring" class="md-nav__link">
    3.5 BLTouch Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-exp1exp2-and-lcd-screen-wiring" class="md-nav__link">
    3.6 EXP1+EXP2 and LCD Screen Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37-rgb-wiring" class="md-nav__link">
    3.7 RGB Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38-dsicsi-wiring" class="md-nav__link">
    3.8 DSI/CSI Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#39-spi-display-wiring" class="md-nav__link">
    3.9 SPI Display Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#310-adxl345-accelerometer" class="md-nav__link">
    3.10 ADXL345 Accelerometer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-os-download" class="md-nav__link">
    4. OS Download
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/z1996xm/BIGTREETECH/blob/main/docs/M4P.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="m4p">M4P<a class="headerlink" href="#m4p" title="Permanent link">&para;</a></h1>
<p><img src=img/M4P_Title.png /></p>
<p><a href ="<a href="https://z1996xm.github.io/BIGTREETECH/">https://z1996xm.github.io/BIGTREETECH/</a>">&lt;<img src=img/M4P_Title.png /></p>
<h2 id="1-brief-introduction">1. Brief Introduction<a class="headerlink" href="#1-brief-introduction" title="Permanent link">&para;</a></h2>
<h3 id="11-main-features">1.1 Main Features<a class="headerlink" href="#11-main-features" title="Permanent link">&para;</a></h3>
<ul>
<li>DSI1, CSI1 interface (for CM4)</li>
</ul>
<ul>
<li>Gigabit Ethernet interface (1000M for CM4, 100M for CB1)</li>
</ul>
<ul>
<li>3 USB 2.0 ports</li>
</ul>
<ul>
<li>
<p>Equipping the ESD protection chip on the USB and Ethernet ports to prevent being </p>
<p>broken down by the static electricity</p>
</li>
</ul>
<ul>
<li>
<p>When working with Raspberry Pi CM4, its 40pin pin header has the same function </p>
<p>as that of Raspberry Pi(Custom IO for CB1)</p>
</li>
</ul>
<ul>
<li>
<p>Using a BTB board-to-board connection, which can be further reinforced with </p>
<p>screws, perfectly compatible with CB1 or Raspberry Pi CM4</p>
</li>
</ul>
<ul>
<li>The MCU adopts STM32G0B0RE 32-bit ARM Cortex-M0+ @64MHz chip</li>
</ul>
<ul>
<li>
<p>The power chip adopts TPS5450-5A, which supports DC12/24V power input, the </p>
<p>output current of the chip is up to 5A, and the peak value can reach 6A, which </p>
<p>perfectly supports the power supply of the core board</p>
</li>
</ul>
<ul>
<li>
<p>The protection circuit of the thermistor part prevents the main control chip from </p>
<p>burning due to leakage of the heated bed or heater cartridge</p>
</li>
</ul>
<ul>
<li>
<p>In CNC fan ports: FAN0, FAN1, and FAN2, a 24V (DCIN) or 5V power supply can </p>
<p>be selected with a jumper cap (Note: the voltage of the three CNC fans should be </p>
<p>the same, and cannot be set to different voltages individually)</p>
</li>
</ul>
<ul>
<li>
<p>MCU firmware can be upgraded through SD card, or through DFU with Klipper's </p>
<p>make flash command</p>
</li>
</ul>
<ul>
<li>
<p>On-board TMC-driven SPI and UART working modes, on-board DIAG function </p>
<p>pins, can be used by simply plugging and unplugging the jumper cap</p>
</li>
</ul>
<ul>
<li>Support filament runout detection, BLTouch, RGB lights...</li>
</ul>
<ul>
<li>Adopt replaceable fuse for easy replacement</li>
</ul>
<h3 id="12-basic-parameters">1.2 Basic Parameters<a class="headerlink" href="#12-basic-parameters" title="Permanent link">&para;</a></h3>
<ul>
<li>Product Size: 160 x 95mm</li>
</ul>
<ul>
<li>Installation Size: 146 x 84.2mm; 97 x 84.2mm</li>
</ul>
<ul>
<li>Core Board Installation Size: 33 x 48mm</li>
</ul>
<ul>
<li>The maximum output current of the heated bed port: 10A</li>
</ul>
<ul>
<li>The maximum output current of the heater cartridge port: 6A</li>
</ul>
<ul>
<li>
<p>Fan Port: Three for CNC Fan(24V/5V Voltage Selectable), One SoC Fan(Voltage </p>
<p>not Selectable)</p>
</li>
</ul>
<ul>
<li>The maximum output current of the fan port:1A</li>
</ul>
<ul>
<li>Total current for heater cartridge + driver + fan: ＜20A</li>
</ul>
<ul>
<li>Extended Interface: BLTouch(Servos, Probe), Fil-DET, 2 * RGB</li>
</ul>
<ul>
<li>
<p>Motor Driver: Support TMC5160, TMC2209, TMC2225, TMC2226, TMC2208, </p>
<p>TMC2130, ST820, LV8729, DRV8825, A4988...</p>
</li>
</ul>
<ul>
<li>Driver Working Mode Support: SPI, UART, STEP/DIR</li>
</ul>
<ul>
<li>Motor Drive Interface: X, Y, Z(Dual Z-axis), E0, a total of four.</li>
</ul>
<ul>
<li>Temperature Sensor Interface: 2-way 100K NTC</li>
</ul>
<ul>
<li>Display Screen: RepRapDiscount EXP-1 + EXP-2</li>
</ul>
<h3 id="13-product-dimension">1.3 Product Dimension<a class="headerlink" href="#13-product-dimension" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_Size.png /></p>
<h2 id="2-peripheral-interface">2. Peripheral Interface<a class="headerlink" href="#2-peripheral-interface" title="Permanent link">&para;</a></h2>
<h3 id="21-interface-diagram">2.1 Interface Diagram<a class="headerlink" href="#21-interface-diagram" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_Interface_Diagram.png /></p>
<h3 id="22-pin-out">2.2 Pin Out<a class="headerlink" href="#22-pin-out" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_Pin_Out.png /></p>
<h2 id="3-interface-instruction">3. Interface Instruction<a class="headerlink" href="#3-interface-instruction" title="Permanent link">&para;</a></h2>
<h3 id="31-installing-the-core-board">3.1 Installing the Core Board<a class="headerlink" href="#31-installing-the-core-board" title="Permanent link">&para;</a></h3>
<p>M4P+CM4：Pay attention to the direction, as shown below.</p>
<p><img src=img/M4P+CM4.png /></p>
<p>M4P+CB1：Pay attention to the direction, as shown below.</p>
<p><img src=img/M4P+CB1.png /></p>
<h3 id="32-40-pin-gpio">3.2 40 pin GPIO<a class="headerlink" href="#32-40-pin-gpio" title="Permanent link">&para;</a></h3>
<p>When working with CM4, the pin arrangement of 40 Pin GPIO is exactly the same as that of Raspberry Pi. When working with CB1, it is a custom IO arrangement, as shown in the figure below, the 'GPIO4' in front of '_' is the IO of CM4, and the latter 'PC7' is the IO of CB1.</p>
<p><img src=img/M4P_40_Pin.png /></p>
<h3 id="33-type-c">3.3 TYPE-C<a class="headerlink" href="#33-type-c" title="Permanent link">&para;</a></h3>
<p>After the M4P is powered on, the red LED1 on the lower right side of the motherboard will light up, indicating that the power supply is normal. The J8 on the middle of the board is the power selection terminal, it needs to be short circuited only when the type-C USB is used to supply power to the motherboard or the USB is used to supply power externally. The signal of type-C is connected to the SoC, Only used when writing OS image for CM4 eMMC version.</p>
<p><img src=img/M4P_TYPE_C.png /></p>
<h3 id="34-stepper-driver">3.4 Stepper Driver<a class="headerlink" href="#34-stepper-driver" title="Permanent link">&para;</a></h3>
<h4 id="341-normal-stepdirstandalone-mode">3.4.1 Normal STEP/DIR(STANDALONE) Mode<a class="headerlink" href="#341-normal-stepdirstandalone-mode" title="Permanent link">&para;</a></h4>
<p>For example, A4988, DRV8825, LV8729, ST820...use the jumper cap to short MS0-MS2 according to the driver subdivision table.</p>
<p><img src=img/M4P_Stepper_Driver.png /></p>
<p><strong>Note: If using A4988or DRV8825, RST and SLP must be shorted with jumper caps for normal operation.</strong></p>
<table>
<thead>
<tr>
<th>Driver chips</th>
<th>MS1</th>
<th>MS2</th>
<th>MS3</th>
<th>Microsteps</th>
<th>Excitation Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>A498816 microstep max 35V 2A</td>
<td>L</td>
<td>L</td>
<td>L</td>
<td>Full Step</td>
<td>2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>L</td>
<td>1/2</td>
<td>1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>L</td>
<td>1/4</td>
<td>W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>L</td>
<td>1/8</td>
<td>2W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>H</td>
<td>1/16</td>
<td>4W1-2 Phase</td>
</tr>
<tr>
<td><img src=img/M4P_Data2.png /></td>
<td><img src=img/M4P_Data1.png /></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Driver chips</th>
<th>MODE2</th>
<th>MODE1</th>
<th>MODE0</th>
<th>Microsteps</th>
<th>Excitation Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>DRV8825Maximum 32microsteps8.2V-45V 2.5A at 24V T=25℃</td>
<td>L</td>
<td>L</td>
<td>L</td>
<td>Full Step</td>
<td>2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>L</td>
<td>H</td>
<td>1/2</td>
<td>1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>L</td>
<td>1/4</td>
<td>W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>H</td>
<td>1/8</td>
<td></td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>L</td>
<td>1/16</td>
<td></td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>H</td>
<td>1/32</td>
<td></td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>L</td>
<td>1/32</td>
<td></td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>H</td>
<td>1/32</td>
<td></td>
</tr>
<tr>
<td><img src=img/M4P_Data3.png /></td>
<td><img src=img/M4P_Data4.png /></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Driver chips</th>
<th>MD3</th>
<th>MD2</th>
<th>MD1</th>
<th>Microsteps</th>
<th>Excitation Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>LV8729Maximum 128microsteps36V 1.8A</td>
<td>L</td>
<td>L</td>
<td>L</td>
<td>Full Step</td>
<td>2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>L</td>
<td>H</td>
<td>1/2</td>
<td>1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>L</td>
<td>1/4</td>
<td>W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>H</td>
<td>1/8</td>
<td>2W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>L</td>
<td>1/16</td>
<td>4W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>H</td>
<td>1/32</td>
<td>8W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>L</td>
<td>1/64</td>
<td>16W1-2 Phase</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>H</td>
<td>1/128</td>
<td>32W1-2 Phase</td>
</tr>
<tr>
<td><img src=img/M4P_Data5.png /></td>
<td><img src=img/M4P_Data6.png /></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Driver chips</th>
<th>MS3</th>
<th>MS2</th>
<th>MS1</th>
<th>Microsteps</th>
</tr>
</thead>
<tbody>
<tr>
<td>ST820Maximum 256microsteps45V 1.5A</td>
<td>L</td>
<td>L</td>
<td>L</td>
<td>Full Step</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>L</td>
<td>H</td>
<td>1/2</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>L</td>
<td>1/4</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>H</td>
<td>H</td>
<td>1/8</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>L</td>
<td>1/16</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>L</td>
<td>H</td>
<td>1/32</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>L</td>
<td>1/128</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>H</td>
<td>H</td>
<td>1/256</td>
</tr>
<tr>
<td><img src=img/M4P_Data7.png /></td>
<td><img src=img/M4P_Data8.png /></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="342-uart-mode-of-tmc-driver">3.4.2 UART Mode of TMC Driver<a class="headerlink" href="#342-uart-mode-of-tmc-driver" title="Permanent link">&para;</a></h4>
<p>For example, TMC2208, TMC2209, TMC2225... Use a jumper cap for each to connect the position of the red box in the figure, and the subdivision and driver current is set by firmware.</p>
<p><img src=img/M4P_TMC_UART_Mode.png /></p>
<h4 id="343-spi-mode-of-tmc-driver">3.4.3 SPI Mode of TMC Driver<a class="headerlink" href="#343-spi-mode-of-tmc-driver" title="Permanent link">&para;</a></h4>
<p>For example, TMC2130, TMC5160, TMC5161... Use 4 jumper caps for each to connect the position of the red box in the figure, and the subdivision and driver current is set by firmware.</p>
<p><img src=img/M4P_TMC_SPI_Mode.png /></p>
<h4 id="344-diagsensorless-homing-of-tmc-driver">3.4.4 DIAG(Sensorless Homing) of TMC Driver<a class="headerlink" href="#344-diagsensorless-homing-of-tmc-driver" title="Permanent link">&para;</a></h4>
<p>As shown in the figure, plug the jumper cap when using the Sensorless Homing function, and leave it unplugged when it is not used. There is no need to cut the DIAG pin of the driver.</p>
<p><img src=img/M4P_TMC_DIAG_Mode.png /></p>
<h4 id="345-stepper-driver-voltage-selection">3.4.5 Stepper Driver Voltage Selection<a class="headerlink" href="#345-stepper-driver-voltage-selection" title="Permanent link">&para;</a></h4>
<p>The power supply of each driver can be set by the jumper. When the jumper is inserted into the left side, the independent MOTOR POWER port is used for driver power, and the supported voltage up to 56V. When the jumper is inserted into the right side, the main POWER port is used for driver power, and the 12/24v voltage is supported.</p>
<h5 id="driver-independent-power-supply">Driver independent power supply<a class="headerlink" href="#driver-independent-power-supply" title="Permanent link">&para;</a></h5>
<p>The jumper is inserted into the left side and powered by the MOTOR POWER port. the supported voltage up to 56V.</p>
<p><img src=img/M4P_IPS.png /></p>
<h5 id="main-power-supply">Main power supply<a class="headerlink" href="#main-power-supply" title="Permanent link">&para;</a></h5>
<p>The jumper is inserted into the right side and powered by the main POWER port. the 12/24v voltage is supported.</p>
<p><img src=img/M4P_MPS.png /></p>
<h3 id="35-bltouch-wiring">3.5 BLTouch Wiring<a class="headerlink" href="#35-bltouch-wiring" title="Permanent link">&para;</a></h3>
<p>M4P_BLTouch_Wiring</p>
<p><img src=img/M4P_BLTouch_Wiring.png /></p>
<h3 id="36-exp1exp2-and-lcd-screen-wiring">3.6 EXP1+EXP2 and LCD Screen Wiring<a class="headerlink" href="#36-exp1exp2-and-lcd-screen-wiring" title="Permanent link">&para;</a></h3>
<p>M4P_E1_E2_LCD</p>
<p><img src=img/M4P_E1_E2_LCD.png /></p>
<h3 id="37-rgb-wiring">3.7 RGB Wiring<a class="headerlink" href="#37-rgb-wiring" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_RGB_Wiring.png /></p>
<h3 id="38-dsicsi-wiring">3.8 DSI/CSI Wiring<a class="headerlink" href="#38-dsicsi-wiring" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_DSI_CSI_Wiring.png /></p>
<h3 id="39-spi-display-wiring">3.9 SPI Display Wiring<a class="headerlink" href="#39-spi-display-wiring" title="Permanent link">&para;</a></h3>
<p><img src=img/M4P_SPI_Display_Wiring.png /></p>
<h3 id="310-adxl345-accelerometer">3.10 ADXL345 Accelerometer<a class="headerlink" href="#310-adxl345-accelerometer" title="Permanent link">&para;</a></h3>
<p>Refer to here: <a href="https://www.klipper3d.org/Measuring_Resonances.html">https://www.klipper3d.org/Measuring_Resonances.html</a>, We can refer to the following wiring and configuration when connecting to the M4P motherboard</p>
<p><img src=img/M4P_ADXL345.png /></p>
<p>[adxl345]</p>
<pre><code>```
cs_pin: PD9
spi_bus: spi1
#spi_software_sclk_pin: PA5
#spi_software_mosi_pin: PA7
#spi_software_miso_pin: PA6
```
</code></pre>
<h2 id="4-os-download">4. OS Download<a class="headerlink" href="#4-os-download" title="Permanent link">&para;</a></h2>
<p>For details, please click: <a href="https://z1996xm.github.io/BIGTREETECH/Tutorials.html">https://z1996xm.github.io/BIGTREETECH/Tutorials.html</a></p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="Octopus%20Pro.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Octopus Pro" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Octopus Pro
            </div>
          </div>
        </a>
      
      
        
        <a href="M5P.html" class="md-footer__link md-footer__link--next" aria-label="Next: M5P" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              M5P
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.top", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>